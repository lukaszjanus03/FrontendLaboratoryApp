(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,65857,e=>{"use strict";var a=e.i(43476),s=e.i(71645);e.i(51718);var t=e.i(18357);e.i(36180);var i=e.i(98925),l=e.i(151),d=e.i(71935),o=e.i(5766);function r(){let{user:e}=(0,d.useAuth)(),r=(0,t.getAuth)(l.app),[n,c]=(0,s.useState)(""),[u,m]=(0,s.useState)(""),[b,p]=(0,s.useState)({street:"",city:"",zipCode:""}),[x,y]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{if(e){c(e.displayName||""),m(e.photoURL||"");try{let a=(0,i.doc)(l.db,"users",e.uid),s=await (0,i.getDoc)(a);if(s.exists()){let e=s.data();e.address&&p({city:e.address.city||"",street:e.address.street||"",zipCode:e.address.zipCode||""})}}catch(e){console.error("Błąd pobierania dokumentu: ",e),o.toast.error("Nie udało się pobrać danych profilowych.")}finally{y(!1)}}})()},[e]);let g=e=>{let{name:a,value:s}=e.target;p(e=>({...e,[a]:s}))},h=async a=>{a.preventDefault();let s=o.toast.loading("Zapisywanie zmian...");try{await (0,t.updateProfile)(r.currentUser,{displayName:n,photoURL:u}),await (0,i.setDoc)((0,i.doc)(l.db,"users",e.uid),{address:{city:b.city,street:b.street,zipCode:b.zipCode}},{merge:!0}),console.log("Zapisano dane dla ID: ",e.uid),o.toast.success("Profil zaktualizowany pomyślnie!",{id:s})}catch(e){console.error("Błąd zapisu: ",e),o.toast.error(`Błąd zapisu: ${e.message}`,{id:s})}};return e?(0,a.jsxs)("div",{className:"max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-md border border-gray-200 mt-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-slate-800 border-b pb-2",children:"Edycja Profilu"}),(0,a.jsxs)("form",{onSubmit:h,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700",children:"Dane logowania"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-1",children:"Email (read-only)"}),(0,a.jsx)("input",{type:"text",value:e.email,disabled:!0,className:"w-full border p-2 rounded bg-gray-100 text-gray-500 cursor-not-allowed"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Nazwa wyświetlana"}),(0,a.jsx)("input",{type:"text",value:n,onChange:e=>c(e.target.value),disabled:x,className:"w-full border p-2 rounded focus:ring-2 focus:ring-violet-500 outline-none disabled:opacity-50"})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-100",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700 mb-4",children:"Adres zamieszkania"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Ulica"}),(0,a.jsx)("input",{type:"text",name:"street",value:b.street,onChange:g,disabled:x,className:"w-full border p-2 rounded focus:ring-2 focus:ring-violet-500 outline-none disabled:opacity-50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Miasto"}),(0,a.jsx)("input",{type:"text",name:"city",value:b.city,onChange:g,disabled:x,className:"w-full border p-2 rounded focus:ring-2 focus:ring-violet-500 outline-none disabled:opacity-50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Kod pocztowy"}),(0,a.jsx)("input",{type:"text",name:"zipCode",value:b.zipCode,onChange:g,disabled:x,className:"w-full border p-2 rounded focus:ring-2 focus:ring-violet-500 outline-none disabled:opacity-50"})]})]})]}),(0,a.jsx)("button",{type:"submit",disabled:x,className:"w-full px-6 py-3 bg-violet-600 text-white rounded hover:bg-violet-700 font-medium transition disabled:bg-gray-400",children:x?"Ładowanie danych...":"Zapisz zmiany"})]})]}):null}e.s(["default",()=>r])}]);