(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,65857,e=>{"use strict";var s=e.i(43476),a=e.i(71645);e.i(51718);var t=e.i(18357);e.i(36180);var l=e.i(98925),i=e.i(151),r=e.i(71935),o=e.i(5766);function d(){let{user:e}=(0,r.useAuth)(),d=(0,t.getAuth)(i.app),[n,c]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[b,p]=(0,a.useState)({street:"",city:"",zipCode:""}),[x,h]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{if(e){c(e.displayName||""),m(e.photoURL||"");try{let s=(0,l.doc)(i.db,"users",e.uid),a=await (0,l.getDoc)(s);if(a.exists()){let e=a.data();e.address&&p({city:e.address.city||"",street:e.address.street||"",zipCode:e.address.zipCode||""})}}catch(e){console.error("Błąd: ",e),o.toast.error("Nie udało się pobrać danych.")}finally{h(!1)}}})()},[e]);let g=e=>{let{name:s,value:a}=e.target;p(e=>({...e,[s]:a}))},f=async s=>{s.preventDefault();let a=o.toast.loading("Zapisywanie zmian...");try{await (0,t.updateProfile)(d.currentUser,{displayName:n,photoURL:u}),await (0,l.setDoc)((0,l.doc)(i.db,"users",e.uid),{address:{city:b.city,street:b.street,zipCode:b.zipCode}},{merge:!0}),o.toast.success("Profil zaktualizowany!",{id:a})}catch(e){console.error(e),o.toast.error(`Błąd: ${e.message}`,{id:a})}};return e?(0,s.jsxs)("div",{className:"max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-md border border-gray-200 mt-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-6 text-slate-800 border-b pb-2",children:"Edycja Profilu"}),(0,s.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-700",children:"Dane użytkownika"}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,s.jsx)("div",{className:"relative w-16 h-16 rounded-full overflow-hidden border-2 border-violet-200 bg-gray-100",children:(0,s.jsx)("img",{src:u||"https://ui-avatars.com/api/?name="+(n||"User"),alt:"Avatar",className:"w-full h-full object-cover",onError:e=>{e.target.src="https://ui-avatars.com/api/?name=User"}})}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Tak wyglądasz w aplikacji"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-1",children:"Email (zablokowany)"}),(0,s.jsx)("input",{type:"text",value:e.email,disabled:!0,className:"w-full border p-2 rounded bg-gray-100 text-gray-500 cursor-not-allowed"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Nazwa wyświetlana"}),(0,s.jsx)("input",{type:"text",value:n,onChange:e=>c(e.target.value),disabled:x,className:"w-full border p-2 rounded focus:ring-2 focus:ring-violet-500 outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Link do zdjęcia (URL)"}),(0,s.jsx)("input",{type:"text",value:u,onChange:e=>m(e.target.value),disabled:x,placeholder:"https://przyklad.pl/moje-zdjecie.jpg",className:"w-full border p-2 rounded focus:ring-2 focus:ring-violet-500 outline-none"}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Wklej bezpośredni link do obrazka (np. z Imgur lub Google Photos)."})]})]}),(0,s.jsxs)("div",{className:"pt-4 border-t border-gray-100",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-700 mb-4",children:"Adres zamieszkania"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Ulica"}),(0,s.jsx)("input",{type:"text",name:"street",value:b.street,onChange:g,disabled:x,className:"w-full border p-2 rounded focus:ring-2 focus:ring-violet-500 outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Miasto"}),(0,s.jsx)("input",{type:"text",name:"city",value:b.city,onChange:g,disabled:x,className:"w-full border p-2 rounded focus:ring-2 focus:ring-violet-500 outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Kod pocztowy"}),(0,s.jsx)("input",{type:"text",name:"zipCode",value:b.zipCode,onChange:g,disabled:x,className:"w-full border p-2 rounded focus:ring-2 focus:ring-violet-500 outline-none"})]})]})]}),(0,s.jsx)("button",{type:"submit",disabled:x,className:"w-full px-6 py-3 bg-violet-600 text-white rounded hover:bg-violet-700 font-medium transition shadow-lg shadow-violet-200",children:x?"Ładowanie...":"Zapisz zmiany"})]})]}):null}e.s(["default",()=>d])}]);